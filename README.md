# 🎬 Watch Party - 실시간 동영상 시청 파티

친구들과 함께 실시간으로 YouTube 동영상을 보며 채팅하고 반응을 공유하는 웹 애플리케이션입니다.

## ✨ 주요 기능

- **실시간 동영상 동기화**: WebRTC DataChannel을 활용하여 모든 참여자의 동영상 재생을 밀리초 단위로 동기화
- **음성 채팅**: WebRTC 오디오 스트림을 통한 실시간 음성 대화 기능
- **실시간 채팅**: 동영상을 보면서 실시간으로 메시지 주고받기
- **이모지 반응**: 재미있는 순간에 즉시 이모지로 반응 공유
- **YouTube 통합**: YouTube URL을 붙여넣기만 하면 즉시 재생
- **P2P 연결**: WebRTC를 통한 빠르고 안정적인 피어 간 통신

## 🛠 기술 스택

### Frontend
- React 18
- Vite
- Socket.io Client
- React YouTube
- WebRTC API

### Backend
- Node.js
- Express
- Socket.io
- WebRTC 시그널링 서버

## 🚀 시작하기

### 1. 서버 실행

```bash
cd server
npm install
npm start
```

서버가 `http://localhost:3001`에서 실행됩니다.

### 2. 클라이언트 실행

새 터미널에서:

```bash
cd client
npm install
npm run dev
```

클라이언트가 `http://localhost:3000`에서 실행됩니다.

### 3. 브라우저에서 접속

1. `http://localhost:3000` 접속
2. 닉네임 입력
3. "방 생성하기" 또는 "방 참여하기" 선택
4. 방 생성 시 자동 생성된 방 ID가 클립보드에 복사됩니다
5. 친구에게 방 ID 공유
6. YouTube URL 붙여넣기
7. 음성 채팅을 켜고 함께 시청하기!

## 📖 사용 방법

### 방 만들기/참여하기
**방 생성하기:**
1. 닉네임을 입력합니다
2. "방 생성하기" 버튼을 클릭합니다
3. 자동으로 생성된 방 ID가 클립보드에 복사됩니다
4. 친구들에게 방 ID를 공유합니다

**방 참여하기:**
1. "방 참여하기" 탭을 선택합니다
2. 닉네임을 입력합니다
3. 친구에게 받은 방 ID를 입력합니다
4. "방 참여하기" 버튼을 클릭합니다

### 동영상 재생하기
1. YouTube에서 원하는 동영상 URL을 복사합니다
2. 상단 입력창에 URL을 붙여넣습니다
3. "동영상 불러오기" 버튼을 클릭합니다
4. 동영상 재생/일시정지/탐색이 자동으로 모든 참여자에게 동기화됩니다

### 음성 채팅
1. 헤더의 "📞 음성 채팅 시작" 버튼을 클릭합니다
2. 브라우저에서 마이크 권한을 허용합니다
3. 다른 참여자들과 실시간으로 음성 대화를 나눌 수 있습니다
4. "🎤 마이크 켜짐" 버튼으로 음소거/해제를 전환할 수 있습니다
5. 음성 채팅을 종료하려면 "📞 음성 채팅 종료" 버튼을 클릭합니다

### 채팅 및 반응
- 우측 채팅창에서 메시지를 입력하고 전송할 수 있습니다
- 이모지 버튼을 클릭하여 즉시 반응을 공유할 수 있습니다
  - 👍 좋아요
  - 😂 웃김
  - ❤️ 사랑
  - 🔥 불타는
  - 😮 놀람
  - 🎉 축하

## 🎨 디자인

초록색을 메인 컬러로 하는 모던하고 깔끔한 다크 모드 UI를 제공합니다.

## 🔧 WebRTC 작동 원리

1. **시그널링**: Socket.io를 통해 피어 간 연결 정보 교환
2. **P2P 연결**: WebRTC를 통한 직접적인 피어 투 피어 연결 수립
3. **DataChannel**: RTCDataChannel을 통한 동영상 동기화 및 채팅 데이터 전송
4. **오디오 스트림**: WebRTC MediaStream API를 통한 실시간 음성 전송
5. **STUN 서버**: Google의 공개 STUN 서버를 사용하여 NAT 통과

## 📝 프로젝트 구조

```
webrtc-task/
├── client/                 # React 클라이언트
│   ├── src/
│   │   ├── components/    # React 컴포넌트
│   │   │   ├── JoinRoom.jsx
│   │   │   ├── PartyRoom.jsx
│   │   │   ├── VideoPlayer.jsx
│   │   │   └── Chat.jsx
│   │   ├── hooks/         # 커스텀 훅
│   │   │   └── useWebRTC.js
│   │   ├── App.jsx
│   │   ├── App.css
│   │   ├── index.css
│   │   └── main.jsx
│   └── package.json
│
└── server/                # Node.js 시그널링 서버
    ├── server.js
    └── package.json
```

## 🌐 브라우저 호환성

- Chrome 89+
- Firefox 88+
- Safari 15+
- Edge 89+

WebRTC를 지원하는 최신 브라우저가 필요합니다.

## 💡 팁

- 같은 로컬 네트워크에 있는 친구들끼리 사용할 수 있습니다
- 인터넷을 통해 사용하려면 서버를 배포하고 TURN 서버 설정이 필요할 수 있습니다
- 최상의 경험을 위해 안정적인 인터넷 연결을 권장합니다

## 🐛 문제 해결

### 동영상이 동기화되지 않아요
- 브라우저를 새로고침해보세요
- 인터넷 연결을 확인해보세요
- 방을 나갔다가 다시 들어와보세요

### 채팅이 전송되지 않아요
- WebRTC 연결이 수립될 때까지 잠시 기다려보세요
- 브라우저 콘솔에서 에러를 확인해보세요

### 서버 연결 오류
- 서버가 실행 중인지 확인하세요
- 포트 3001이 사용 가능한지 확인하세요

## 📄 라이선스

MIT License

## 🙏 감사합니다

즐거운 Watch Party 되세요! 🎉
